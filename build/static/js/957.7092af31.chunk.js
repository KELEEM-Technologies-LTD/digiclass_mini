"use strict";(self.webpackChunkdigiclass_mini=self.webpackChunkdigiclass_mini||[]).push([[957],{3957:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),o=n(9439),i=n(2791),s=n(2592),c=n(4849),l=n(3908),d=n(5240),u=n(5770),v=n(2981),p=n(7689),f=n(1087),m=n(4880),h=(n(106),n(456),n(184));t.default=function(){var e,t=(0,i.useContext)(d.Z),n=t.loading,x=t.theme,g=t.corpid,b=t.setCorpId;document.title="".concat(null===x||void 0===x?void 0:x.name," - DigiClass");var w=(0,i.useState)(""),y=(0,o.Z)(w,2),j=(y[0],y[1]),N=(0,i.useState)(!1),Z=(0,o.Z)(N,2),k=Z[0],C=Z[1],S=(0,i.useState)(""),U=(0,o.Z)(S,2),E=U[0],_=U[1],I=(0,i.useState)(""),T=(0,o.Z)(I,2),D=T[0],z=T[1],P=(0,i.useState)(""),R=(0,o.Z)(P,2),A=R[0],L=R[1],O=(0,p.UO)().corp_id;(0,i.useEffect)((function(){""===g&&b(O)}),[]);var F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o,i,s,c,l,d,p,f,h,x,b,w;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),C(!0),e.prev=2,e.next=5,u.Z.post(v.Z.signin,{username:D,password:A});case 5:if(i=e.sent,null===(s=null===(n=i.data)||void 0===n?void 0:n.data)||void 0===s||null===(a=s.user)||void 0===a||!a.is_corporate||(null===s||void 0===s||null===(o=s.user)||void 0===o?void 0:o.corporate_id)!==g){e.next=18;break}return l=s.token,m.d.saveAccessToken(l),e.next=12,u.Z.get(v.Z.get_corporate+"/".concat(g,"?"));case 12:d=e.sent,p=null===(c=d.data)||void 0===c?void 0:c.data,f=s.user,p.verify_auth?"pending"===f.user_state?_("This organization has not approved your account to view content on their page."):(h=s.user,m.d.saveUserData(h),window.location.href="/main/".concat(g)):(m.d.saveUserData(f),window.location.href="/main/".concat(g)),e.next=19;break;case 18:_("This organization has not authorized you to view content on their page.");case 19:C(!1),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),_(null!==(x=null===e.t0||void 0===e.t0||null===(b=e.t0.response)||void 0===b||null===(w=b.data)||void 0===w?void 0:w.message)&&void 0!==x?x:"There was an error"),C(!1);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("currentUrl");j(e),H()}),[]);var H=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.d.getAccessToken();case 2:return t=e.sent,e.next=5,m.d.retrieveUserData();case 5:if(n=e.sent,null===t||null===n){e.next=10;break}window.location.href="/main/".concat(g||n.corporate_id),e.next=12;break;case 10:return e.next=12,m.d.clearStorage();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?(0,h.jsx)(l.Z,{}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"bg-gray-100",style:{minHeight:"100vh"},children:(0,h.jsx)("div",{style:{},className:"flex flex-col justify-center  md:items-center pt-8",children:(0,h.jsxs)("div",{className:" md:w-3/12 md:p-0 px-6",children:[(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,h.jsx)(s.Z,{fluid:!0,src:null!==(e=null===x||void 0===x?void 0:x.img)&&void 0!==e?e:"/logo.png",alt:"Logo",style:{height:"100px"}})})}),(0,h.jsx)("p",{className:"text-2xl mb-3 font-semibold text-dark text-center",children:"Log into your account"}),(0,h.jsx)("div",{style:{height:"1.4px"},className:"my-4 bg-slate-300"}),(0,h.jsx)("small",{className:"text-danger",children:E}),(0,h.jsxs)("form",{action:"",onSubmit:F,children:[(0,h.jsx)("div",{className:"mt-3",children:(0,h.jsx)("input",{type:"text",className:"py-3 px-4 w-full border border-black rounded bg-gray-50 outline-none",placeholder:"Enter your user id",value:D,onChange:function(e){return z(e.target.value)}})}),(0,h.jsx)("div",{className:"mt-3",children:(0,h.jsx)("input",{type:"password",className:"py-3 px-4 w-full border border-black rounded bg-gray-50 outline-none",placeholder:"Enter your password",value:A,onChange:function(e){return L(e.target.value)}})}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(f.rU,{to:"/redeem/".concat(g),className:"text-decoration-none text-base mt-3",children:"Redeem account"})}),(0,h.jsx)("div",{className:"mt-4 text-center",children:(0,h.jsx)("button",{type:"submit",style:{backgroundColor:null===x||void 0===x?void 0:x.primary_color},disabled:k,className:"whitespace-nonwrap border py-2 px-12 text-base font-medium text-white hover:bg-secondary-800",children:k?(0,h.jsx)(c.Z,{}):"Sign In"})})]}),(0,h.jsxs)("div",{className:"flex items-center mt-4 justify-center",children:[(0,h.jsx)("p",{children:"New to Digiclass?"}),(0,h.jsx)(f.rU,{to:"/sign-up/".concat(g),children:(0,h.jsx)("p",{className:"ml-2 text-base text-gray-700",children:"Sign Up"})})]})]})})})})}},456:function(e,t,n){function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,o=0,i=0,s="";a=t.charAt(i++);~a&&(n=o%4?64*n+a:a,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return s};function o(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return a(t)}}function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.Z=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(".")[n]))}catch(e){throw new i("Invalid token specified: "+e.message)}}},2592:function(e,t,n){var r=n(1413),a=n(5987),o=n(1694),i=n.n(o),s=n(2791),c=n(2007),l=n.n(c),d=n(162),u=n(184),v=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(l().string,l().bool,l().bool,l().bool,l().bool,s.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,s=e.fluid,c=void 0!==s&&s,l=e.rounded,p=void 0!==l&&l,f=e.roundedCircle,m=void 0!==f&&f,h=e.thumbnail,x=void 0!==h&&h,g=(0,a.Z)(e,v);return n=(0,d.vE)(n,"img"),(0,u.jsx)("img",(0,r.Z)((0,r.Z)({ref:t},g),{},{className:i()(o,c&&"".concat(n,"-fluid"),p&&"rounded",m&&"rounded-circle",x&&"".concat(n,"-thumbnail"))}))})));p.displayName="Image",t.Z=p},4849:function(e,t,n){var r=n(1413),a=n(5987),o=n(1694),i=n.n(o),s=n(2791),c=n(162),l=n(184),d=["bsPrefix","variant","animation","size","as","className"],u=s.forwardRef((function(e,t){var n=e.bsPrefix,o=e.variant,s=e.animation,u=void 0===s?"border":s,v=e.size,p=e.as,f=void 0===p?"div":p,m=e.className,h=(0,a.Z)(e,d);n=(0,c.vE)(n,"spinner");var x="".concat(n,"-").concat(u);return(0,l.jsx)(f,(0,r.Z)((0,r.Z)({ref:t},h),{},{className:i()(m,x,v&&"".concat(x,"-").concat(v),o&&"text-".concat(o))}))}));u.displayName="Spinner",t.Z=u}}]);
//# sourceMappingURL=957.7092af31.chunk.js.map