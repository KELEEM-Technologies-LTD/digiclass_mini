"use strict";(self.webpackChunkdigiclass_mini=self.webpackChunkdigiclass_mini||[]).push([[525],{9525:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(4165),r=n(5861),s=n(9439),i=n(2791),o=n(2592),c=n(4849),l=n(3908),u=n(5240),d=n(5770),m=n(2981),p=n(7689),f=n(1087),g=n(4880),h=n(106),x=n(456),v=n(184);var b=function(e){e.icon;var t=e.className,n=e.error,a=e.placeholder,r=e.onChange,o=(0,i.useState)(!1),c=(0,s.Z)(o,2),l=c[0],u=c[1],d=n?"ring-1 ring-secondary":"";return(0,v.jsxs)("div",{className:"".concat(t),children:[(0,v.jsx)("input",{"data-testid":"input",className:"focus:outline-none px-4 font-serif bg-white w-full ".concat(d," "),type:l?"text":"password",placeholder:a,onChange:r}),(0,v.jsx)("span",{onClick:function(){return u(!l)},className:"flex justify-center items-center px-4",children:l?(0,v.jsx)("i",{className:"fa fa-eye text-sm"}):(0,v.jsx)("i",{className:"fa fa-eye-slash text-sm"})})]})};function y(){var e=(0,i.useContext)(u.Z),t=e.loading,n=e.theme,y=e.corpid;document.title="".concat(null===n||void 0===n?void 0:n.name," - DigiClass");var w=(0,p.s0)(),j=(0,i.useState)(""),k=(0,s.Z)(j,2),N=k[0],Z=k[1],C=(0,i.useState)(""),S=(0,s.Z)(C,2),_=S[0],q=S[1],E=(0,i.useState)(""),P=(0,s.Z)(E,2),A=P[0],I=P[1],U=(0,i.useState)(""),B=(0,s.Z)(U,2),D=B[0],T=B[1],z=(0,i.useState)(""),Y=(0,s.Z)(z,2),L=Y[0],R=Y[1],O=(0,i.useState)(!1),W=(0,s.Z)(O,2),F=W[0],H=W[1],J=(0,i.useState)(!1),G=(0,s.Z)(J,2),K=G[0],M=G[1],Q=(0,i.useState)(""),V=(0,s.Z)(Q,2),X=V[0],$=(V[1],(0,i.useState)("")),ee=(0,s.Z)($,2),te=(ee[0],ee[1]),ne=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,s,i,o,c,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),F){e.next=4;break}return(0,h.e)("Please accept the terms and conditions"),e.abrupt("return");case 4:if(D){e.next=7;break}return(0,h.e)("Please enter a password!"),e.abrupt("return");case 7:if(D===L){e.next=10;break}return(0,h.e)("Passwords dose not match!"),e.abrupt("return");case 10:if(N){e.next=13;break}return(0,h.e)("Please enter first name!"),e.abrupt("return");case 13:if(_){e.next=16;break}return(0,h.e)("Please enter last name!"),e.abrupt("return");case 16:return M(!0),e.prev=17,s={first_name:N,last_name:_,email:A,password:D},e.next=21,d.Z.post(m.Z.signup+"/".concat(y),s);case 21:return i=e.sent,o=null===(n=i.data)||void 0===n?void 0:n.data,console.log(o),g.d.saveUserData(o.user),g.d.saveAccessToken(o.token),e.next=28,d.Z.get(m.Z.get_signup_questions+"/".concat(y));case 28:c=e.sent,(l=null===(r=c.data)||void 0===r?void 0:r.data).length>=1?(M(!1),u={questions:l,user:o.user},(0,h.BY)("Sign up successfully"),w("/sign-up/questions/".concat(y),{state:u})):(M(!1),(0,h.BY)("Sign up successfully"),w("/sign-in/".concat(y))),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(17),M(!1),console.log(e.t0);case 37:case"end":return e.stop()}}),e,null,[[17,33]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,s,i,o,c,l,u,p,f,v,b,j,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=(0,x.Z)(t.credential),console.log(n),(0,h.t)("authenticating...."),e.prev=4,e.next=7,d.Z.post(m.Z.signup,{first_name:n.given_name,last_name:n.family_name,email:n.email,password:"880710449497-8k8qttcfig311nqmh16l0qjbd53er8he.apps.googleusercontent.com",user_role:"user"});case 7:if(r=e.sent,console.log(r),200!==r.status){e.next=21;break}return u=null===(s=r.data)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.user,p=null===(o=r.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.token,g.d.saveUserData(u),g.d.saveAccessToken(p),e.next=16,d.Z.get(m.Z.get_signup_questions+"/".concat(y));case 16:f=e.sent,(v=null===(l=f.data)||void 0===l?void 0:l.data).length>=1?(M(!1),b={questions:v,user:u},(0,h.BY)("Account created successfully,Logged in successfully"),w("/sign-up/questions/".concat(y),{state:b})):(M(!1),(0,h.BY)("Account created successfully"),w("/main/".concat(y))),e.next=22;break;case 21:(0,h.e)("There was an error, please reload the page and try again");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),console.log(e.t0),(0,h.e)(null===(j=e.t0.response)||void 0===j||null===(k=j.data)||void 0===k?void 0:k.message);case 28:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){google.accounts.id.initialize({client_id:"880710449497-8k8qttcfig311nqmh16l0qjbd53er8he.apps.googleusercontent.com",callback:ae}),google.accounts.id.renderButton(document.getElementById("google_sign_icon"),{theme:"outline",size:"large"}),re()}),[]);var re=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.d.getAccessToken();case 2:return t=e.sent,e.next=5,g.d.retrieveUserData();case 5:if(n=e.sent,null===t||null===n){e.next=10;break}window.location.href="/main/".concat(y),e.next=12;break;case 10:return e.next=12,g.d.clearStorage();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,v.jsx)(l.Z,{}):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"bg-light",style:{minHeight:"100vh"},children:(0,v.jsx)("div",{style:{},className:"flex flex-col justify-center  md:items-center py-8",children:(0,v.jsxs)("div",{className:" md:w-3/12 md:p-0 px-6",children:[(0,v.jsx)("div",{className:"flex flex-col",children:(0,v.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,v.jsx)(o.Z,{fluid:!0,src:null===n||void 0===n?void 0:n.img,alt:"Logo",style:{height:"100px"}})})}),(0,v.jsx)("p",{className:"text-2xl mb-3 font-bold text-dark",children:"Sign up and start learning"}),(0,v.jsx)("div",{id:"google_sign_icon"}),(0,v.jsx)("small",{className:"text-danger",children:X}),(0,v.jsxs)("form",{action:"",onSubmit:ne,children:[(0,v.jsx)("div",{className:"mt-3",children:(0,v.jsx)("input",{type:"text",name:"fname",className:"py-3 px-4 w-full placeholder:text-sm border border-black rounded bg-white outline-none",placeholder:"Enter your first name",value:N,onChange:function(e){return Z(e.target.value)}})}),(0,v.jsx)("div",{className:"mt-3",children:(0,v.jsx)("input",{type:"text",className:"py-3 px-4 w-full placeholder:text-sm border border-black rounded bg-white outline-none",placeholder:"Enter your last name",name:"lname",value:_,onChange:function(e){return q(e.target.value)}})}),(0,v.jsx)("div",{className:"mt-3",children:(0,v.jsx)("input",{type:"email",className:"py-3 px-4 w-full placeholder:text-sm border border-black rounded bg-white outline-none",placeholder:"Enter your email",value:A,onChange:function(e){return I(e.target.value)}})}),(0,v.jsx)("div",{className:"mt-3",children:(0,v.jsx)(b,{placeholder:"Enter your password",style:{borderWidth:"2px"},className:"flex py-3 placeholder:text-sm border-black border rounded bg-white justify-between",name:"password",value:D,onChange:function(e){return T(e.target.value)}})}),(0,v.jsx)("div",{className:"mt-3",children:(0,v.jsx)(b,{placeholder:"Confirm Password",style:{borderWidth:"2px"},className:"flex py-3 placeholder:text-sm border-black border rounded bg-white justify-between",name:"cpassword",value:L,onChange:function(e){return R(e.target.value)}})}),(0,v.jsx)("div",{className:"flex flex-col items-center mt-3 justify-center",children:(0,v.jsxs)("div",{className:"text-center text-sm",children:[(0,v.jsx)("label",{className:"cursor-pointer mr-2",children:(0,v.jsx)("input",{type:"checkbox",checked:F,onChange:function(e){H(e.target.checked),te("")},className:"p-0.5 cursor-pointer"})}),'By clicking "Sign up", you agree to'," ",(0,v.jsx)(f.rU,{to:"http://kelemm-digiclass.herokuapp.com/privacy-policy",className:"text-gray-600",children:"DigiClass Terms & Conditions"})]})}),(0,v.jsx)("div",{className:"mt-6 text-center",children:(0,v.jsx)("button",{style:{backgroundColor:null===n||void 0===n?void 0:n.primary_color},type:"submit",className:"inline-flex items-center justify-center whitespace-nowrap rounded-2 border border-transparent px-4 py-2 text-base font-medium text-white",children:K?(0,v.jsx)(c.Z,{}):(0,v.jsx)("p",{className:"text-white",children:"Sign Up"})})}),(0,v.jsxs)("div",{className:"flex items-center mt-6 justify-center",children:[(0,v.jsx)("p",{children:"Already on Digiclass?"}),(0,v.jsx)(f.rU,{to:"/sign-in/".concat(y),children:(0,v.jsx)("p",{className:"ml-2 text-secondary-700",children:"Login"})})]})]})]})})})})}},456:function(e,t,n){function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,s=0,i=0,o="";r=t.charAt(i++);~r&&(n=s%4?64*n+r:r,s++%4)?o+=String.fromCharCode(255&n>>(-2*s&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function s(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return r(t)}}function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.Z=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(s(e.split(".")[n]))}catch(e){throw new i("Invalid token specified: "+e.message)}}},2592:function(e,t,n){var a=n(1413),r=n(5987),s=n(1694),i=n.n(s),o=n(2791),c=n(2007),l=n.n(c),u=n(162),d=n(184),m=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(l().string,l().bool,l().bool,l().bool,l().bool,o.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,o=e.fluid,c=void 0!==o&&o,l=e.rounded,p=void 0!==l&&l,f=e.roundedCircle,g=void 0!==f&&f,h=e.thumbnail,x=void 0!==h&&h,v=(0,r.Z)(e,m);return n=(0,u.vE)(n,"img"),(0,d.jsx)("img",(0,a.Z)((0,a.Z)({ref:t},v),{},{className:i()(s,c&&"".concat(n,"-fluid"),p&&"rounded",g&&"rounded-circle",x&&"".concat(n,"-thumbnail"))}))})));p.displayName="Image",t.Z=p},4849:function(e,t,n){var a=n(1413),r=n(5987),s=n(1694),i=n.n(s),o=n(2791),c=n(162),l=n(184),u=["bsPrefix","variant","animation","size","as","className"],d=o.forwardRef((function(e,t){var n=e.bsPrefix,s=e.variant,o=e.animation,d=void 0===o?"border":o,m=e.size,p=e.as,f=void 0===p?"div":p,g=e.className,h=(0,r.Z)(e,u);n=(0,c.vE)(n,"spinner");var x="".concat(n,"-").concat(d);return(0,l.jsx)(f,(0,a.Z)((0,a.Z)({ref:t},h),{},{className:i()(g,x,m&&"".concat(x,"-").concat(m),s&&"text-".concat(s))}))}));d.displayName="Spinner",t.Z=d}}]);
//# sourceMappingURL=525.2ee1d209.chunk.js.map